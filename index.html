<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Degustazioni Vino Valle d’Aosta | Les Crêtes</title>
    <meta name="description" content="Vivi un’esperienza unica da Les Crêtes: degustazioni vini, cantina e vigneti nel cuore della Valle d’Aosta. Prenota subito la tua visita.">
    <meta property="og:title" content="Degustazioni Vino Valle d’Aosta | Les Crêtes">
    <meta property="og:description" content="Vivi un’esperienza unica da Les Crêtes: degustazioni vini, cantina e vigneti nel cuore della Valle d’Aosta. Prenota subito la tua visita.">
    <meta property="og:image" content="img/thumbnail.jpg">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="it_IT">
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <nav>
        <ul class="nav-menu">
            <li>
                <a href="#" class="nav-link dropdown">identità</a>
            </li>
            <li>
                <a href="#" class="nav-link">vini</a>
            </li>
            <li>
                <a href="#" class="nav-link">devin cosmetica</a>
            </li>
            <li>
                <a href="#" class="nav-link">eventi</a>
            </li>
        </ul>
        <a href="#" class="nav-logo">
            <img src="img/logo.svg" height="60" alt="logo">
        </a>
        <ul class="nav-menu">
            <li>
                <a href="#" class="nav-link dropdown">esperienza</a>
            </li>
            <li>
                <a href="#" class="nav-link">gift card</a>
            </li>
            <li>
                <a href="#" class="nav-link">store locator</a>
            </li>
            <li>
                <a href="#" class="nav-link dropdown">
                    <img src="img/globe.svg" width="16" height="16" alt="globe icon">
                    it
                </a>
            </li>
        </ul>
        <button class="mobile" onclick="menu();">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <ul class="mobile-menu">
            <li>
                <a href="#" class="nav-link dropdown">identità</a>
            </li>
            <li>
                <a href="#" class="nav-link">vini</a>
            </li>
            <li>
                <a href="#" class="nav-link">devin cosmetica</a>
            </li>
            <li>
                <a href="#" class="nav-link dropdown">esperienza</a>
            </li>
            <li>
                <a href="#" class="nav-link">gift card</a>
            </li>
            <li>
                <a href="#" class="nav-link">store locator</a>
            </li>
        </ul>
    </nav>
    <section>
        <div class="head">
            <h1 class="head-title">Prenota subito l’esperienza più adatta a te!</h1>
            <h2 class="head-subtitle">Ti aspettiamo per farti scoprire il mondo, raccontato dai nostri vini e dalla nostra storia.</h2>
        </div>
    </section>
</body>
<script>
document.addEventListener("DOMContentLoaded", async () => {
    function menu() {
        var e = document.querySelector("nav");
        e.classList.toggle("open");
    }

    const section = document.querySelector("section");

    const fetchdata = async () => {
        try {
            const response = await fetch("experiences.json");
            if (!response.ok) throw new Error("error loading json");
            const data = await response.json();
            return data.experiences || [];
        } catch {
            console.error("failed to load experiences.json");
            return [];
        }
    };

    const icons = (includes) => {
        let html = "";
        if (includes?.wine === "yes") {
            html += `<img src="img/wine-glass.svg" width="32" height="32" alt="wine glass icon">`;
        }
        if (includes?.food === "yes") {
            html += `<img src="img/cutlery.svg" width="32" height="32" alt="cutlery icon">`;
        }
        html += `<img src="img/clock.svg" width="32" height="32" alt="clock icon">`;
        return html;
    };

    const card = (item) => {
        const el = document.createElement("div");
        el.classList.add("card");
        el.innerHTML = `
            <div class="card-cover" style="background-image:url('${item.cover}')"></div>
            <div class="card-content">
                <div class="card-tags">
                    ${icons(item.includes)}
                    <span class="card-time">${item.time}'</span>
                </div>
                <h2 class="card-title">${item.title}</h2>
                <p class="card-description">${item.description}</p>
            </div>
            <div class="card-footer">
                <div class="price">
                    <span class="price-label">Prezzo</span>
                    <span class="price-amount">€ ${item.price.toFixed(2)}</span>
                    <span class="price-note">${item.note}</span>
                </div>
                <a href="${item.link}" target="_blank" class="link">Dettagli</a>
            </div>
        `;
        return el;
    };

    const render = async () => {
        const data = await fetchdata();
        data.forEach((item) => {
            const el = card(item);
            section.appendChild(el);
        });
    };

    render();
});
</script>
</html>